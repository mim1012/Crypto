# 전문 가상화폐 자동매매 시스템 Desktop EXE v1.0

## 📋 PRD 명세 완벽 구현

### 🎯 주요 기능

#### 1. 진입 조건 설정 (Entry Conditions)
- **이동평균선 조건**: 8가지 조건 지원 (시가/현재가 vs 이평선 비교)
- **Price Channel**: 상단/하단 돌파, 기간 설정 (20일 기본)
- **호가 감지**: 상승/하락 틱 설정, 0호가 즉시 진입
- **틱 기반 추가**: 5틱 상승 후 2틱 하락 시 30% 추가 진입
- **캔들 상태**: 양봉/음봉 시 진입 설정

#### 2. 청산 조건 설정 (Exit Conditions)
- **PCS 청산**: 1단~12단 활성화, 1STEP/2STEP 선택
- **PC 트레일링**: 하단선/상단선 청산, 손실중 청산 옵션
- **호가 청산**: 틱 하락/상승 시 청산 설정
- **PC 본절**: 1단계(PC선 돌파), 2단계(진입가 복귀) 설정

#### 3. 시스템 설정 (System Settings)
- **거래소 설정**: API 키, 레버리지, 포지션 모드
- **시간 제어**: 요일별 가동시간 (2개 시간대), 요일별 청산시간
- **리스크 관리**: 포지션 크기, 최대 포지션, 12단계 익절/손절

#### 4. 실시간 모니터링
- **차트 위젯**: pyqtgraph 실시간 차트, Price Channel 표시
- **포지션 위젯**: 실시간 PnL, PCS 단계 표시
- **상태 위젯**: 연결상태, 조건 활성화 상태

#### 5. 보안 기능
- 프로그램 시작 시 비밀번호 인증 (기본: admin123)
- 30분 비활성 시 자동 잠금
- 설정 파일 Fernet 암호화
- 최대 3회 시도 후 5분 잠금

## 🚀 설치 및 실행

### 시스템 요구사항
- **OS**: Windows 10/11 (64-bit)
- **메모리**: 최소 4GB RAM (권장 8GB)
- **저장공간**: 500MB 이상
- **Python**: 3.7+ (개발 환경)

### 필수 라이브러리
```bash
pip install PyQt5>=5.15.7
pip install pyqtgraph>=0.13.1
pip install cryptography>=3.4.8
pip install numpy>=1.24.0
pip install psutil>=5.9.0
```

### 개발 환경에서 실행
```bash
# 1. 저장소 클론
git clone <repository-url>
cd Crypto

# 2. 가상환경 생성 (권장)
python -m venv trading_env
trading_env\Scripts\activate

# 3. 의존성 설치
pip install -r requirements.txt

# 4. 데스크톱 앱 실행
python run_desktop_app.py
```

### EXE 파일 생성
```bash
# PyInstaller로 실행 파일 생성
python setup_desktop.py
```

## 📊 사용 방법

### 1. 프로그램 시작
1. `run_desktop_app.py` 실행 또는 EXE 파일 실행
2. 보안 인증 창에서 비밀번호 입력 (기본: admin123)
3. 메인 인터페이스 로드 완료

### 2. 메인 인터페이스
```
┌─────────────────────────────────────────────────────────────┐
│ [🚨 긴급 포지션 청산] [⏸️ 자동매매 일시정지] [▶️ 자동매매 재시작] │
├─────────────────────────────────────────────────────────────┤
│ 📋 진입설정 │ 📈 청산설정 │ ⚙️ 시스템설정 │ 📊 실시간차트      │
│                                                  │           │
│ - 이동평균선 조건                                   │ 포지션현황     │
│ - Price Channel                                │           │
│ - 호가 감지                                      │ 시스템상태     │
│ - 틱 추가진입                                     │           │
│ - 캔들 패턴                                      │           │
└─────────────────────────────────────────────────────────────┘
│ 연결: ✅ 바이낸스 선물 │ 포지션: 매수 0.1 BTC (+1.5%) │ 시간: 14:30:25 │
```

### 3. 진입 조건 설정
1. **🎯 진입 설정** 탭 클릭
2. 원하는 조건 활성화:
   - 이동평균선: 8가지 조건 중 선택
   - Price Channel: 상단/하단 돌파, 기간 설정
   - 호가 감지: 상승/하락 틱, 0호가 진입
   - 틱 추가: 5틱↑ → 2틱↓ 시 30% 추가
   - 캔들 패턴: 양봉/음봉 진입

### 4. 청산 조건 설정
1. **📈 청산 설정** 탭 클릭
2. PCS 청산 시스템:
   - 1~12단계 개별 설정
   - 1STEP/2STEP 모드 선택
   - 수익률별 단계적 청산
3. 기타 청산 조건 설정

### 5. 시스템 설정
1. **⚙️ 시스템 설정** 탭 클릭
2. 거래소 API 설정
3. 요일별 가동시간 설정
4. 리스크 관리 파라미터 설정

## 🛡️ 보안 기능

### 인증 시스템
- **기본 비밀번호**: `admin123`
- **최대 시도**: 3회
- **잠금 시간**: 5분
- **세션 유지**: 30분 (선택 가능)

### 암호화
- **알고리즘**: AES-256 (Fernet)
- **대상**: 설정 파일, API 키
- **키 관리**: 자동 생성 및 보관

### 자동 잠금
- **비활성 시간**: 30분
- **검사 주기**: 30초
- **잠금 시**: 재인증 필요

## 📈 실시간 모니터링

### 차트 기능
- **실시간 가격**: 100ms 업데이트
- **Price Channel**: 상/하단선 표시
- **이동평균선**: MA20, MA50 지원
- **거래량**: 실시간 거래량 표시

### 포지션 관리
- **실시간 PnL**: 미실현 손익 표시
- **PCS 단계**: 12단계 달성률 표시
- **포지션 상태**: 진입가, 현재가, 수익률
- **원클릭 청산**: 개별/전체 청산 기능

### 상태 모니터링
- **연결 상태**: 거래소, 데이터피드, 웹소켓
- **조건 활성화**: 진입/청산 조건 실시간 상태
- **시스템 리소스**: CPU, 메모리 사용률
- **오류/경고**: 실시간 알림

## ⚙️ 기술 명세

### 성능 요구사항 (PRD 준수)
- **UI 반응속도**: <50ms
- **메모리 사용량**: <200MB
- **차트 업데이트**: 100ms 주기
- **데이터 처리**: 실시간

### 아키텍처
```
Desktop Application
├── main_gui.py          # 메인 GUI 컨트롤러
├── tabs/
│   ├── entry_tab.py     # 진입 조건 설정
│   ├── exit_tab.py      # 청산 조건 설정
│   └── settings_tab.py  # 시스템 설정
├── widgets/
│   ├── chart_widget.py  # 실시간 차트
│   ├── position_widget.py # 포지션 모니터
│   └── status_widget.py # 상태 모니터
└── dialogs/
    └── auth_dialog.py   # 보안 인증
```

### 의존성
- **PyQt5**: GUI 프레임워크
- **pyqtgraph**: 고성능 차트
- **cryptography**: 암호화
- **psutil**: 시스템 모니터링
- **numpy**: 수치 계산

## 🔧 개발자 정보

### 빌드 설정
```python
# setup_desktop.py 실행으로 EXE 생성
python setup_desktop.py

# 생성물:
# - dist/CryptoTradingSystem_v1.0/CryptoTradingSystem.exe
# - CryptoTradingSystem_installer.nsi (NSIS 인스톨러 스크립트)
```

### 코드 구조
- **MVC 패턴**: Model-View-Controller 분리
- **시그널-슬롯**: Qt 이벤트 시스템 활용
- **스레드 안전**: 백그라운드 데이터 처리
- **예외 처리**: 포괄적 오류 처리

## 📞 지원 및 문의

### 기술 지원
- **이메일**: support@crypto-trading.com
- **문서**: /docs/ 폴더 참조
- **로그**: 시스템 로그 자동 기록

### 업데이트
- **버전 확인**: 도움말 > 정보
- **자동 업데이트**: 향후 지원 예정
- **수동 업데이트**: 새 버전 재설치

## ⚠️ 면책 조항

본 소프트웨어는 교육 및 연구 목적으로 제공됩니다. 가상화폐 거래는 높은 리스크를 수반하며, 모든 거래 손실에 대한 책임은 사용자에게 있습니다. 실제 거래 전 충분한 테스트와 검토를 수행하시기 바랍니다.

---

**Professional Crypto Trading System v1.0**  
Copyright © 2024 Professional Trading Team  
All Rights Reserved.